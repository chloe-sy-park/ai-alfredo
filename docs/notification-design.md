# ì•Œí”„ë ˆë„ ì•Œë¦¼ Â· í‘¸ì‹œ Â· ì¬ê°œì… ì‹œìŠ¤í…œ ì„¤ê³„

> ì•Œí”„ë ˆë„ì˜ ì•Œë¦¼ ì‹œìŠ¤í…œì€ "ê·€ì°®ì€ ì•±"ì´ ì•„ë‹Œ "ë¯¿ìŒì§í•œ ë¹„ì„œ"ê°€ ë˜ê¸° ìœ„í•œ ì„¬ì„¸í•œ ì„¤ê³„ê°€ í•„ìš”í•©ë‹ˆë‹¤.

---

## ëª©ì°¨

1. [ì•Œë¦¼ ì—­í•  ì •ì˜](#1-ì•Œë¦¼-ì—­í• -ì •ì˜)
2. [í‘¸ì‹œ ìœ í˜• ë¶„ë¥˜](#2-í‘¸ì‹œ-ìœ í˜•-ë¶„ë¥˜)
3. [ë¬¸ì¥ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ](#3-ë¬¸ì¥-ìŠ¤íƒ€ì¼-ê°€ì´ë“œ)
4. [íƒ€ì´ë°/íŠ¸ë¦¬ê±° ê·œì¹™](#4-íƒ€ì´ë°íŠ¸ë¦¬ê±°-ê·œì¹™)
5. [ì•Œë¦¼ â†’ ì•± ëœë”© UX](#5-ì•Œë¦¼--ì•±-ëœë”©-ux)
6. [ë¬´ì‘ë‹µ/ë¯¸ì ‘ì† ëŒ€ì‘](#6-ë¬´ì‘ë‹µë¯¸ì ‘ì†-ëŒ€ì‘)
7. [ì„±í–¥ë³„ ê°œì¸í™”](#7-ì„±í–¥ë³„-ê°œì¸í™”)
8. [ê¸ˆê¸° ëª©ë¡](#8-ê¸ˆê¸°-ëª©ë¡)

---

## 1. ì•Œë¦¼ ì—­í•  ì •ì˜

### 1.1 ì•Œë¦¼ì˜ ì¡´ì¬ ì´ìœ 

ì•Œí”„ë ˆë„ì˜ ì•Œë¦¼ì€ **"í–‰ë™ íŠ¸ë¦¬ê±°"**ì…ë‹ˆë‹¤.

```
ì•Œë¦¼ì˜ ëª©ì :
- ë¦¬ë§ˆì¸ë“œ (ìŠì–´ë²„ë¦° ê²ƒ ìƒê¸°)
- ë„›ì§€ (ë¶€ë“œëŸ¬ìš´ í–‰ë™ ìœ ë„)
- ì¸ì‚¬ì´íŠ¸ (ë§¥ë½ ìˆëŠ” ì •ë³´ ì œê³µ)
- ì¼€ì–´ (ì •ì„œì  ì§€ì§€ì™€ ê²©ë ¤)

ì•Œë¦¼ì´ ì•„ë‹Œ ê²ƒ:
- ê´‘ê³ /ë§ˆì¼€íŒ… ë„êµ¬
- ì•± ì°¸ì—¬ ê°•ìš” ìˆ˜ë‹¨
- ì£„ì±…ê° ìœ ë°œ ì¥ì¹˜
```

### 1.2 ì•Œë¦¼ ë°œì†¡ ì›ì¹™

| ì›ì¹™ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| **ë§¥ë½ì„±** | ì™œ ì§€ê¸ˆ ì´ ì•Œë¦¼ì¸ì§€ ëª…í™• | "ì ì‹¬ ë¨¹ê³  2ì‹œê°„ ì§€ë‚¬ì–´ìš”" |
| **ì‹¤í–‰ê°€ëŠ¥ì„±** | ë°”ë¡œ í•  ìˆ˜ ìˆëŠ” í–‰ë™ ì œì‹œ | "ì§€ê¸ˆ ì‹œì‘" ë²„íŠ¼ í¬í•¨ |
| **ì¡´ì¤‘** | ì‚¬ìš©ì ì‹œê°„ê³¼ ìƒí™© ì¡´ì¤‘ | ë¯¸íŒ… ì¤‘ì—” ë³´ë‚´ì§€ ì•ŠìŒ |
| **ì¼ê´€ì„±** | ë²„í‹€ëŸ¬ ìºë¦­í„° í†¤ ìœ ì§€ | í•­ìƒ ì¹œê·¼í•˜ê³  ë‹¤ì •í•˜ê²Œ |

### 1.3 ì•Œë¦¼ vs ì¸ì•± ë„›ì§€

```
í‘¸ì‹œ ì•Œë¦¼ (ì•± ì™¸ë¶€):
- ì¤‘ìš”ë„ ë†’ì€ ì •ë³´
- ì‹œê°„ ë¯¼ê°í•œ ì•Œë¦¼ (ë¯¸íŒ… 15ë¶„ ì „)
- í•˜ë£¨ ìµœëŒ€ 8ê°œ ì œí•œ

ì¸ì•± ë„›ì§€ (ì•± ë‚´ë¶€):
- ë§¥ë½ì  ì œì•ˆ
- í”Œë¡œíŒ… í˜•íƒœë¡œ ë…¸ì¶œ
- ì œí•œ ì—†ìŒ (ìì—°ìŠ¤ëŸ¬ìš´ íë¦„ì—ì„œ)
```

---

## 2. í‘¸ì‹œ ìœ í˜• ë¶„ë¥˜

### 2.1 ì•Œë¦¼ ìœ í˜• ì²´ê³„

```typescript
type NotificationCategory =
  | 'scheduled'   // ì •ê¸° ì•Œë¦¼ (ë¸Œë¦¬í•‘)
  | 'triggered'   // ì´ë²¤íŠ¸ ê¸°ë°˜ (ë¯¸íŒ… ì „)
  | 'contextual'  // ìƒí™© ê¸°ë°˜ (ë¹ˆ ì‹œê°„ ê°ì§€)
  | 'care';       // ì¼€ì–´ ì•Œë¦¼ (ê²©ë ¤, íœ´ì‹)
```

### 2.2 ì„¸ë¶€ ìœ í˜•í‘œ

| ìœ í˜• | ì¹´í…Œê³ ë¦¬ | ê¸´ê¸‰ë„ | í•˜ë£¨ ìµœëŒ€ | ì„¤ëª… |
|------|---------|--------|----------|------|
| `morning_briefing` | scheduled | ì¤‘ | 1 | ì•„ì¹¨ í•˜ë£¨ ë¸Œë¦¬í•‘ |
| `evening_wrapup` | scheduled | ë‚® | 1 | ì €ë… ë§ˆë¬´ë¦¬ |
| `meeting_reminder` | triggered | ë†’ | 10 | ë¯¸íŒ… Në¶„ ì „ |
| `task_deadline` | triggered | ì¤‘ | 3 | ë§ˆê° ì„ë°• íƒœìŠ¤í¬ |
| `focus_suggest` | contextual | ë‚® | 2 | ë¹ˆ ì‹œê°„ ì§‘ì¤‘ ì œì•ˆ |
| `overload_warn` | care | ì¤‘ | 1 | ê³¼ë¶€í•˜ ê²½ê³  |
| `rest_suggest` | care | ë‚® | 3 | íœ´ì‹ ê¶Œìœ  |
| `late_warning` | care | ì¤‘ | 2 | í‡´ê·¼ ì‹œê°„ ì•Œë¦¼ |
| `streak_celebrate` | care | ë‚® | 3 | ì—°ì† ë‹¬ì„± ì¶•í•˜ |
| `weather_adjust` | contextual | ë‚® | 1 | ë‚ ì”¨ ê¸°ë°˜ ì¡°ì–¸ |

### 2.3 ê¸´ê¸‰ë„ë³„ ë™ì‘

```typescript
const URGENCY_BEHAVIOR = {
  high: {
    vibrate: true,
    requireInteraction: true,
    quietHoursException: false,  // ì¡°ìš©í•œ ì‹œê°„ì—ë„ ì¡°ìš©íˆ
    sound: 'default'
  },
  medium: {
    vibrate: true,
    requireInteraction: false,
    quietHoursException: false,
    sound: 'default'
  },
  low: {
    vibrate: false,
    requireInteraction: false,
    quietHoursException: false,
    sound: 'silent'
  }
};
```

---

## 3. ë¬¸ì¥ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

### 3.1 ê¸°ë³¸ ì›ì¹™

```
DO:
âœ“ ì¹œê·¼í•œ ë°˜ë§ì²´ ìœ ì§€
âœ“ ì´ëª¨ì§€ëŠ” ì œëª©ì—ë§Œ 1ê°œ
âœ“ ë³¸ë¬¸ì€ 2ì¤„ ì´ë‚´
âœ“ êµ¬ì²´ì ì¸ ìˆ«ì í™œìš©
âœ“ ê¸ì •ì  í”„ë ˆì´ë°

DON'T:
âœ— ëª…ë ¹ì¡° ("~í•˜ì„¸ìš”")
âœ— ì£„ì±…ê° ìœ ë°œ ("ì•„ì§ë„ ì•ˆ í–ˆì–´ìš”?")
âœ— ê³¼ë„í•œ ì´ëª¨ì§€
âœ— ëª¨í˜¸í•œ í‘œí˜„ ("ì•±ì„ í™•ì¸í•´ë³´ì„¸ìš”")
```

### 3.2 ìœ í˜•ë³„ í†¤ ì˜ˆì‹œ

#### ì•„ì¹¨ ë¸Œë¦¬í•‘
```
âœ“ "ì¢‹ì€ ì•„ì¹¨! ì˜¤ëŠ˜ ë¯¸íŒ… 3ê°œ, ì§‘ì¤‘í•  ì‹œê°„ 2ì‹œê°„ ìˆì–´ìš”"
âœ“ "ì¼ì–´ë‚¬ì–´ìš”? ì˜¤ëŠ˜ì€ ì—¬ìœ ë¡œìš´ í•˜ë£¨ì˜ˆìš” â˜ºï¸"
âœ— "ì˜¤ëŠ˜ í•  ì¼ì´ ìˆì–´ìš”. í™•ì¸í•˜ì„¸ìš”."
```

#### ë¯¸íŒ… ë¦¬ë§ˆì¸ë”
```
âœ“ "íŒ€ ë¯¸íŒ… 15ë¶„ ì „ì´ì—ìš”. ì»¤í”¼ í•œ ì” ì–´ë•Œìš”?"
âœ“ "ë‹¤ìŒ ë¯¸íŒ… ì¤€ë¹„í•  ì‹œê°„! 5ë¶„ ë’¤ ì‹œì‘ì´ì—ìš”"
âœ— "ë¯¸íŒ… ì‹œì‘í•©ë‹ˆë‹¤."
```

#### íƒœìŠ¤í¬ ë„›ì§€
```
âœ“ "ë³´ê³ ì„œ ë§ˆê°ì´ ë‚´ì¼ì´ì—ìš”. ì˜¤ëŠ˜ ì‹œì‘í•´ë³¼ê¹Œìš”?"
âœ“ "ì´ê²ƒë¶€í„° í•´ë³¼ê¹Œìš”? 'ë°œí‘œ ì¤€ë¹„' ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”"
âœ— "ë³´ê³ ì„œë¥¼ ì œì¶œí•˜ì„¸ìš”."
```

#### íœ´ì‹ ê¶Œìœ 
```
âœ“ "ë²Œì¨ 1ì‹œê°„ ì§‘ì¤‘í–ˆì–´ìš”! ì ê¹ ëˆˆ ì‰¬ì–´ê°€ìš” â˜•"
âœ“ "ë¯¸íŒ… ì‚¬ì´ 10ë¶„! ìŠ¤íŠ¸ë ˆì¹­ ì–´ë•Œìš”?"
âœ— "íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”."
```

#### ê²©ë ¤ ë©”ì‹œì§€
```
âœ“ "3ì¼ ì—°ì† ë¬¼ ë§ˆì‹œê¸° ì„±ê³µ! ìŠµê´€ì´ ë˜ê³  ìˆì–´ìš”"
âœ“ "ì˜¤ëŠ˜ ë²Œì¨ íƒœìŠ¤í¬ 5ê°œ ì™„ë£Œ! í˜ì´ìŠ¤ ì¢‹ì•„ìš”"
âœ— "ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤."
```

### 3.3 ìƒí™©ë³„ ë³€í˜•

```typescript
const MORNING_BRIEFING_VARIANTS = {
  light: "ì˜¤ëŠ˜ì€ ì—¬ìœ ë¡œìš´ í•˜ë£¨ì˜ˆìš”. {top_task}ë¶€í„° ì²œì²œíˆ í•´ë³¼ê¹Œìš”?",
  normal: "ì˜¤ëŠ˜ í•  ì¼ {task_count}ê°œ, ë¯¸íŒ… {meeting_count}ê°œ ìˆì–´ìš”.",
  heavy: "ì˜¤ëŠ˜ ì¢€ ë°”ë¹ ìš”! ë¯¸íŒ… {meeting_count}ê°œ... í˜ë‚´ìš” ğŸ’ª",
  very_heavy: "ì˜¤ëŠ˜ ì •ë§ ë¹¡ë¹¡í•´ìš” ğŸ˜… ê°€ì¥ ì¤‘ìš”í•œ ê²ƒë¶€í„° í•´ë´ìš”.",

  // ì»¨ë””ì…˜ ê¸°ë°˜ ë³€í˜•
  tired: "ì¢€ í”¼ê³¤í•´ ë³´ì—¬ìš”. ì˜¤ëŠ˜ì€ í•µì‹¬ë§Œ ì§‘ì¤‘í•´ë³¼ê¹Œìš”?",
  energetic: "ì˜¤ëŠ˜ ì»¨ë””ì…˜ ì¢‹ì•„ ë³´ì—¬ìš”! ë„ì „ì ì¸ ê²ƒ í•´ë³¼ê¹Œìš”?"
};
```

---

## 4. íƒ€ì´ë°/íŠ¸ë¦¬ê±° ê·œì¹™

### 4.1 ë°œì†¡ ê°€ëŠ¥ ì‹œê°„ëŒ€

```typescript
const NOTIFICATION_HOURS = {
  // ê¸°ë³¸ í—ˆìš© ì‹œê°„
  default: {
    start: '07:00',
    end: '22:00'
  },

  // ì¡°ìš©í•œ ì‹œê°„ (ì ˆëŒ€ ë³´ë‚´ì§€ ì•ŠìŒ)
  quiet: {
    start: '22:00',
    end: '07:00'
  },

  // íƒ€ì…ë³„ ì˜ˆì™¸
  exceptions: {
    morning_briefing: {
      start: '06:00',  // ì•„ì¹¨ ë¸Œë¦¬í•‘ì€ ë” ì´ë¥¼ ìˆ˜ ìˆìŒ
      useUserSetting: true  // ì‚¬ìš©ì ì„¤ì • ìš°ì„ 
    },
    meeting_reminder: {
      ignoreQuietHours: false,  // ì¡°ìš©í•œ ì‹œê°„ì— ë¯¸íŒ…ì´ë©´?
      minNotice: 5  // ìµœì†Œ 5ë¶„ ì „
    }
  }
};
```

### 4.2 íŠ¸ë¦¬ê±° ê·œì¹™

```typescript
const TRIGGER_RULES = {
  // ë¯¸íŒ… ë¦¬ë§ˆì¸ë”
  meeting_reminder: {
    triggers: [
      { before: 15, condition: 'first_reminder' },
      { before: 5, condition: 'urgent_reminder' },
      { before: 0, condition: 'start_now' }
    ],
    skipIf: [
      'meeting_declined',
      'already_in_meeting',
      'user_marked_prepared'
    ]
  },

  // íƒœìŠ¤í¬ ë§ˆê° ì•Œë¦¼
  task_deadline: {
    triggers: [
      { before: 24 * 60, condition: 'deadline_tomorrow' },
      { before: 4 * 60, condition: 'deadline_today' },
      { before: 60, condition: 'deadline_soon' }
    ],
    skipIf: [
      'task_completed',
      'task_delegated',
      'already_reminded_today'
    ]
  },

  // ì§‘ì¤‘ ì‹œê°„ ì œì•ˆ
  focus_suggest: {
    triggers: [
      { event: 'free_time_detected', minDuration: 60 },
      { event: 'meeting_ended', cooldown: 10 },
      { event: 'peak_hour', userChronotype: true }
    ],
    skipIf: [
      'in_meeting',
      'break_time',
      'already_focusing'
    ]
  }
};
```

### 4.3 ë¹ˆë„ ì œí•œ (Throttling)

```typescript
const THROTTLE_RULES = {
  // ì¼ì¼ ìµœëŒ€
  dailyMax: {
    total: 8,
    byType: {
      morning_briefing: 1,
      evening_wrapup: 1,
      meeting_reminder: 10,  // ë¯¸íŒ… ìˆ˜ì— ë”°ë¼
      task_deadline: 3,
      focus_suggest: 2,
      rest_suggest: 3,
      care_message: 2
    }
  },

  // ìµœì†Œ ê°„ê²© (ë¶„)
  minInterval: {
    default: 30,
    meeting_reminder: 5,
    rest_suggest: 60,
    same_task: 4 * 60  // ê°™ì€ íƒœìŠ¤í¬ëŠ” 4ì‹œê°„
  },

  // ì—°ì† ë¬´ì‹œ ì‹œ ìë™ ê°ì†Œ
  autoReduce: {
    dismissThreshold: 3,  // 3ë²ˆ ì—°ì† ë¬´ì‹œ
    action: 'reduce_frequency',
    reduction: 0.5  // 50% ê°ì†Œ
  }
};
```

### 4.4 ìƒí™© ì¸ì‹

```typescript
async function shouldSendNow(
  userId: string,
  notificationType: string
): Promise<{ send: boolean; reason?: string }> {

  // 1. í˜„ì¬ ë¯¸íŒ… ì¤‘ì¸ê°€?
  if (await isInMeeting(userId)) {
    if (notificationType !== 'meeting_reminder') {
      return { send: false, reason: 'in_meeting' };
    }
  }

  // 2. ì§‘ì¤‘ ëª¨ë“œì¸ê°€?
  if (await isFocusMode(userId)) {
    return { send: false, reason: 'focus_mode' };
  }

  // 3. ìµœê·¼ì— ê°™ì€ íƒ€ì… ë³´ëƒˆë‚˜?
  const recent = await getRecentNotification(userId, notificationType);
  if (recent && withinMinInterval(recent)) {
    return { send: false, reason: 'too_soon' };
  }

  // 4. ì¼ì¼ í•œë„ ì´ˆê³¼?
  if (await exceedsDailyLimit(userId, notificationType)) {
    return { send: false, reason: 'daily_limit' };
  }

  // 5. ì‚¬ìš©ìê°€ í•´ë‹¹ íƒ€ì… ë¹„í™œì„±í™”?
  if (!await isTypeEnabled(userId, notificationType)) {
    return { send: false, reason: 'type_disabled' };
  }

  return { send: true };
}
```

---

## 5. ì•Œë¦¼ â†’ ì•± ëœë”© UX

### 5.1 ë”¥ë§í¬ ì„¤ê³„

```typescript
const NOTIFICATION_LANDING = {
  morning_briefing: {
    url: '/briefing',
    state: { source: 'notification', highlight: 'today' }
  },

  meeting_reminder: {
    url: '/calendar?event={eventId}',
    state: { source: 'notification', action: 'join_meeting' }
  },

  task_deadline: {
    url: '/tasks/{taskId}',
    state: { source: 'notification', action: 'start_focus' }
  },

  focus_suggest: {
    url: '/focus?task={taskId}',
    state: { source: 'notification', autoStart: false }
  },

  rest_suggest: {
    url: '/',  // ë©”ì¸ìœ¼ë¡œ
    state: { source: 'notification', showBreakCard: true }
  }
};
```

### 5.2 ëœë”© í›„ í”Œë¡œìš°

```
ì•Œë¦¼ í´ë¦­ â†’ ì•± ì˜¤í”ˆ â†’ ì»¨í…ìŠ¤íŠ¸ ë³µì› â†’ ì•¡ì…˜ ì œì•ˆ

ì˜ˆì‹œ (ë¯¸íŒ… ë¦¬ë§ˆì¸ë”):
1. ì•Œë¦¼: "íŒ€ ë¯¸íŒ… 5ë¶„ ì „ì´ì—ìš”"
2. í´ë¦­ â†’ ìº˜ë¦°ë” ë·° ì˜¤í”ˆ
3. í•´ë‹¹ ë¯¸íŒ… í•˜ì´ë¼ì´íŠ¸
4. "ë¯¸íŒ… ì°¸ì—¬" ë²„íŠ¼ ë…¸ì¶œ
5. (ë¯¸íŒ… ë§í¬ ìˆìœ¼ë©´) ë°”ë¡œ ì—°ê²° ì˜µì…˜

ì˜ˆì‹œ (ì§‘ì¤‘ ì‹œê°„ ì œì•ˆ):
1. ì•Œë¦¼: "ì§€ê¸ˆ 2ì‹œê°„ ë¹„ì–´ìˆì–´ìš”"
2. í´ë¦­ â†’ ì§‘ì¤‘ ëª¨ë“œ í™”ë©´
3. ì¶”ì²œ íƒœìŠ¤í¬ í‘œì‹œ
4. "ì‹œì‘í•˜ê¸°" / "ë‹¤ë¥¸ íƒœìŠ¤í¬" ì„ íƒ
```

### 5.3 ì•Œë¦¼ ì•¡ì…˜ ë²„íŠ¼

```typescript
interface NotificationAction {
  action: string;
  title: string;
  handler: (notificationData: any) => void;
}

const NOTIFICATION_ACTIONS = {
  meeting_reminder: [
    { action: 'join', title: 'ì°¸ì—¬í•˜ê¸°', handler: openMeetingLink },
    { action: 'snooze', title: '5ë¶„ ë’¤', handler: snooze5Minutes }
  ],

  task_deadline: [
    { action: 'start', title: 'ì‹œì‘í•˜ê¸°', handler: startFocusMode },
    { action: 'delegate', title: 'ìœ„ì„í•˜ê¸°', handler: openDelegateModal }
  ],

  rest_suggest: [
    { action: 'rest', title: 'ì‰¬ì–´ê°ˆê²Œìš”', handler: startBreak },
    { action: 'continue', title: 'ë” í• ê²Œìš”', handler: dismissAndContinue }
  ],

  focus_suggest: [
    { action: 'start', title: 'ì‹œì‘', handler: startSuggestedTask },
    { action: 'other', title: 'ë‹¤ë¥¸ ê±°', handler: openTaskPicker }
  ]
};
```

---

## 6. ë¬´ì‘ë‹µ/ë¯¸ì ‘ì† ëŒ€ì‘

### 6.1 ì¬ê°œì… ì „ëµ

```typescript
const REENGAGEMENT_STRATEGY = {
  // ë ˆë²¨ë³„ ë¯¸ì ‘ì† ê¸°ê°„
  levels: {
    light: { days: 1, action: 'gentle_reminder' },
    medium: { days: 3, action: 'value_reminder' },
    heavy: { days: 7, action: 'miss_you' },
    dormant: { days: 14, action: 'soft_reset' }
  },

  // ì¬ê°œì… ë©”ì‹œì§€
  messages: {
    gentle_reminder: {
      title: "ğŸ§ ë³´ê³  ì‹¶ì–´ìš”",
      body: "ì–´ì œ í•˜ë£¨ ì–´ë• ì–´ìš”? ì˜¤ëŠ˜ ë¸Œë¦¬í•‘ ì¤€ë¹„í–ˆì–´ìš”."
    },
    value_reminder: {
      title: "ğŸ§ ìŠì§€ ì•Šì•˜ì–´ìš”",
      body: "ì´ë²ˆ ì£¼ ë¯¸íŒ… {count}ê°œ ìˆì–´ìš”. ê°™ì´ ì¤€ë¹„í•´ìš”!"
    },
    miss_you: {
      title: "ğŸ§ ìš”ì¦˜ ë°”ë¹ ìš”?",
      body: "ì–¸ì œë“  ë‹¤ì‹œ ì™€ìš”. ì—¬ê¸°ì„œ ê¸°ë‹¤ë¦´ê²Œìš”."
    },
    soft_reset: {
      title: "ğŸ§ ë‹¤ì‹œ ë§Œë‚˜ìš”",
      body: "ì˜¤ëœë§Œì´ì—ìš”! ìƒˆë¡­ê²Œ ì‹œì‘í•´ë³¼ê¹Œìš”?"
    }
  }
};
```

### 6.2 ì´íƒˆ ë°©ì§€ ê·œì¹™

```typescript
const CHURN_PREVENTION = {
  // ì•Œë¦¼ ë¬´ì‹œ íŒ¨í„´ ê°ì§€
  ignorePattern: {
    threshold: 5,  // 5ê°œ ì—°ì† ë¬´ì‹œ
    action: 'reduce_and_ask',
    message: "ì•Œë¦¼ì´ ë§ì•˜ë‚˜ìš”? ë¹ˆë„ ì¡°ì ˆí•´ë“œë¦´ê¹Œìš”?"
  },

  // ì•± ì—´ê³  ë°”ë¡œ ë‹«ìŒ
  bouncePattern: {
    threshold: 3,  // 3íšŒ ì—°ì†
    action: 'simplify_home',
    message: null  // ì¡°ìš©íˆ í™ˆ ë‹¨ìˆœí™”
  },

  // ë¯¸ì ‘ì† ì˜ˆë°©
  inactivityPrevention: {
    checkAfter: 24 * 60,  // 24ì‹œê°„ ë¯¸ì ‘ì†
    sendBriefingSummary: true,
    includeHook: "ëŒì•„ì˜¤ë©´ {pending_count}ê°œ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”"
  }
};
```

### 6.3 ë³µê·€ ì‚¬ìš©ì ì²˜ë¦¬

```typescript
async function handleUserReturn(userId: string, inactiveDays: number) {
  if (inactiveDays > 7) {
    // ì˜¤ëœ ë¶€ì¬ â†’ ê°€ë³ê²Œ ë¦¬ì˜¨ë³´ë”©
    return {
      showWelcomeBack: true,
      resetDailyContext: true,
      message: "ë‹¤ì‹œ ë§Œë‚˜ì„œ ë°˜ê°€ì›Œìš”! ì˜¤ëŠ˜ë¶€í„° ë‹¤ì‹œ ì‹œì‘í•´ë³¼ê¹Œìš”?"
    };
  }

  if (inactiveDays > 3) {
    // ì¤‘ê°„ ë¶€ì¬ â†’ ìš”ì•½ ì œê³µ
    return {
      showSummary: true,
      summaryPeriod: inactiveDays,
      message: `${inactiveDays}ì¼ ë™ì•ˆ ì´ëŸ° ì¼ì´ ìˆì—ˆì–´ìš”`
    };
  }

  // ì§§ì€ ë¶€ì¬ â†’ í‰ì†Œì²˜ëŸ¼
  return {
    normalFlow: true
  };
}
```

---

## 7. ì„±í–¥ë³„ ê°œì¸í™”

### 7.1 ë„›ì§€ ê°•ë„ ì„¤ì •

```typescript
type NudgeIntensity = 'minimal' | 'balanced' | 'proactive';

const INTENSITY_PROFILES = {
  minimal: {
    description: "ê¼­ í•„ìš”í•œ ì•Œë¦¼ë§Œ",
    dailyMax: 4,
    types: ['morning_briefing', 'meeting_reminder', 'urgent_deadline'],
    tone: 'gentle'
  },

  balanced: {
    description: "ì ì ˆí•œ ë¦¬ë§ˆì¸ë“œ",
    dailyMax: 8,
    types: ['morning_briefing', 'meeting_reminder', 'task_deadline',
            'rest_suggest', 'evening_wrapup'],
    tone: 'friendly'
  },

  proactive: {
    description: "ì ê·¹ì ì¸ ì„œí¬íŠ¸",
    dailyMax: 12,
    types: ['all'],
    tone: 'encouraging'
  }
};
```

### 7.2 í¬ë¡œë…¸íƒ€ì… ì ì‘

```typescript
const CHRONOTYPE_ADAPTATION = {
  morning_person: {
    peakHours: ['08:00-12:00'],
    briefingTime: '07:00',
    focusSuggestionBias: 'morning',
    eveningWrapup: '18:00'
  },

  night_owl: {
    peakHours: ['14:00-18:00', '20:00-24:00'],
    briefingTime: '09:30',
    focusSuggestionBias: 'afternoon',
    eveningWrapup: '21:00'
  },

  flexible: {
    peakHours: ['10:00-12:00', '14:00-16:00'],
    briefingTime: '08:30',
    focusSuggestionBias: 'adaptive',
    eveningWrapup: '19:00'
  }
};
```

### 7.3 DNA ê¸°ë°˜ ê°œì¸í™”

```typescript
interface PersonalizationFactors {
  // ì—ë„ˆì§€ íŒ¨í„´
  energyPattern: {
    peakTimes: string[];
    lowTimes: string[];
    adaptNotificationTiming: boolean;
  };

  // ìŠ¤íŠ¸ë ˆìŠ¤ ë°˜ì‘
  stressResponse: {
    currentLevel: 'low' | 'medium' | 'high';
    reduceNudgesWhenStressed: boolean;
    increaseCarMessages: boolean;
  };

  // ì‘ì—… ìŠ¤íƒ€ì¼
  workStyle: {
    preferredFocusDuration: number;
    breakFrequency: number;
    multitaskingTendency: 'low' | 'medium' | 'high';
  };

  // ì•Œë¦¼ ë°˜ì‘ ì´ë ¥
  notificationResponse: {
    bestRespondingTypes: string[];
    worstRespondingTypes: string[];
    averageResponseTime: number;
  };
}

async function personalizeNotification(
  userId: string,
  notification: NotificationTemplate
): Promise<NotificationTemplate> {
  const dna = await getDNAInsights(userId);
  const factors = await getPersonalizationFactors(userId);

  // ìŠ¤íŠ¸ë ˆìŠ¤ ë†’ì„ ë•Œ í†¤ ì¡°ì ˆ
  if (factors.stressResponse.currentLevel === 'high') {
    notification.body = softenTone(notification.body);
  }

  // ë°˜ì‘ ì¢‹ì€ íƒ€ì… ìš°ì„ 
  if (factors.notificationResponse.bestRespondingTypes.includes(notification.data.type)) {
    // ì´ íƒ€ì…ì€ íš¨ê³¼ì  - ìœ ì§€
  }

  return notification;
}
```

---

## 8. ê¸ˆê¸° ëª©ë¡

### 8.1 ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ

```typescript
const FORBIDDEN_PRACTICES = {
  // ì£„ì±…ê° ìœ ë°œ ê¸ˆì§€
  guilt: {
    forbidden: [
      "ì•„ì§ë„ ì•ˆ í–ˆì–´ìš”?",
      "ë˜ ë¯¸ë£¨ì…¨ë„¤ìš”",
      "ì´ëŸ¬ë©´ ì•ˆ ë˜ëŠ”ë°...",
      "ì•½ì† ì§€í‚¤ì„¸ìš”",
      "ì‹¤ë§ì´ì—ìš”"
    ],
    reason: "ADHD ì‚¬ìš©ìì—ê²Œ ì£„ì±…ê°ì€ ë™ê¸°ë¶€ì—¬ê°€ ì•„ë‹Œ íšŒí”¼ ìœ ë°œ"
  },

  // ì••ë°•ê° ê¸ˆì§€
  pressure: {
    forbidden: [
      "ë¹¨ë¦¬ í•˜ì„¸ìš”",
      "ì§€ê¸ˆ ë‹¹ì¥",
      "ëŠ¦ì—ˆì–´ìš”!",
      "ì‹œê°„ ì—†ì–´ìš”",
      "ë§ˆê°ì…ë‹ˆë‹¤!"
    ],
    reason: "ê¸‰ë°•í•¨ì€ íŒ¨ë‹‰ì„ ìœ ë°œí•˜ê³  ì˜¤íˆë ¤ í–‰ë™ì„ ë©ˆì¶”ê²Œ í•¨"
  },

  // ë¹„êµ ê¸ˆì§€
  comparison: {
    forbidden: [
      "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€...",
      "í‰ê· ì ìœ¼ë¡œ...",
      "ì›ë˜ëŠ”..."
    ],
    reason: "ë¹„êµëŠ” ìì¡´ê°ì„ ë‚®ì¶”ê³  ì•± ì´íƒˆ ìœ ë°œ"
  },

  // ë¬´ì˜ë¯¸í•œ ì•Œë¦¼ ê¸ˆì§€
  meaningless: {
    forbidden: [
      "ì•±ì„ ì—´ì–´ë³´ì„¸ìš”",
      "ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ìˆì–´ìš”",
      "ì˜¤ëœë§Œì´ì—ìš”" // (ë§¥ë½ ì—†ì´)
    ],
    reason: "ë§¥ë½ ì—†ëŠ” ì•Œë¦¼ì€ ì‹ ë¢°ë¥¼ ê¹ìŒ"
  }
};
```

### 8.2 ì‹œê°„ëŒ€ë³„ ì œí•œ

```typescript
const TIME_RESTRICTIONS = {
  // ì ˆëŒ€ ë³´ë‚´ì§€ ì•ŠëŠ” ì‹œê°„
  absolute_quiet: {
    hours: ['00:00-06:00'],
    exceptions: []  // ì—†ìŒ
  },

  // ì£¼ì˜ê°€ í•„ìš”í•œ ì‹œê°„
  cautious: {
    hours: ['22:00-00:00', '06:00-07:00'],
    allowedTypes: ['urgent_meeting_reminder'],
    maxPerHour: 1
  },

  // ì£¼ë§ ì œí•œ
  weekend: {
    reducedFrequency: 0.5,  // 50% ê°ì†Œ
    disabledTypes: ['task_deadline', 'focus_suggest'],
    exception: 'user_explicit_request'
  }
};
```

### 8.3 ìƒíƒœë³„ ì œí•œ

```typescript
const STATE_RESTRICTIONS = {
  // ìŠ¤íŠ¸ë ˆìŠ¤ ë†’ì„ ë•Œ
  high_stress: {
    disabledTypes: ['task_deadline', 'overload_warn'],
    enabledTypes: ['rest_suggest', 'care_message'],
    toneAdjustment: 'extra_gentle'
  },

  // ë¯¸íŒ… ì—°ì†ì¼ ë•Œ
  meeting_marathon: {
    disabledTypes: ['focus_suggest', 'task_nudge'],
    enabledTypes: ['rest_suggest', 'encouragement'],
    message: "ë¯¸íŒ… ì‚¬ì´ ì ê¹ ìˆ¨ ì‰¬ì–´ìš”"
  },

  // ë§ˆê° ì§ì „
  deadline_crunch: {
    reducedFrequency: 0.7,
    focusOn: ['deadline_task_only'],
    avoidDistractions: true
  }
};
```

### 8.4 ê°œì¸ ì„ í˜¸ ì¡´ì¤‘

```typescript
const USER_PREFERENCE_RESPECT = {
  // ì‚¬ìš©ìê°€ ëˆ íƒ€ì…ì€ ì ˆëŒ€ ë³´ë‚´ì§€ ì•ŠìŒ
  respectDisabledTypes: true,

  // ë°˜ë³µ ë¬´ì‹œí•œ íƒ€ì…ì€ ìë™ ê°ì†Œ
  autoReduceIgnored: {
    threshold: 3,
    reduction: 0.5
  },

  // ëª…ì‹œì  í”¼ë“œë°± ë°˜ì˜
  feedbackActions: {
    'too_many': { action: 'reduce_50', ask: true },
    'not_helpful': { action: 'disable_type', ask: true },
    'wrong_time': { action: 'adjust_timing', ask: true }
  }
};
```

---

## êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ê¸°ë³¸ ì¸í”„ë¼
- [ ] PWA í‘¸ì‹œ êµ¬ë… (VAPID)
- [ ] ì„œë²„ í‘¸ì‹œ ë°œì†¡ (web-push)
- [ ] ê¸°ë³¸ ì•Œë¦¼ íƒ€ì… êµ¬í˜„ (ë¸Œë¦¬í•‘, ë¯¸íŒ…)
- [ ] ì„¤ì • UI

### Phase 2: ìŠ¤ë§ˆíŠ¸ ë¡œì§
- [ ] íƒ€ì´ë° ì—”ì§„ (ì¡°ìš©í•œ ì‹œê°„, ë¯¸íŒ… ì¤‘ ê°ì§€)
- [ ] ì“°ë¡œí‹€ë§ ì‹œìŠ¤í…œ
- [ ] ì¿¨ë‹¤ìš´ ë¡œì§
- [ ] ë”¥ë§í¬ ë¼ìš°íŒ…

### Phase 3: ê°œì¸í™”
- [ ] DNA ê¸°ë°˜ íƒ€ì´ë° ì¡°ì •
- [ ] ë°˜ì‘ ì´ë ¥ ë¶„ì„
- [ ] ìë™ ë¹ˆë„ ì¡°ì ˆ
- [ ] í¬ë¡œë…¸íƒ€ì… ì ì‘

### Phase 4: ì¬ê°œì…
- [ ] ë¯¸ì ‘ì† ê°ì§€
- [ ] ì¬ê°œì… ë©”ì‹œì§€ ë°œì†¡
- [ ] ë³µê·€ ì‚¬ìš©ì í”Œë¡œìš°
- [ ] ì´íƒˆ ë°©ì§€ ë¡œì§

---

## ê¸°ìˆ  ì°¸ì¡°

- ê¸°ìˆ  êµ¬í˜„ ìƒì„¸: [07-notification-system.md](./07-notification-system.md)
- ì•ˆì „ ì‹œìŠ¤í…œ: [safety-guidelines.md](./safety-guidelines.md)
- í†¤ ì‹œìŠ¤í…œ: [03-tone-system.md](./03-tone-system.md)
